<style>

.group:after {
  content: "";
  clear: both;
  display: block;
}

section.main {
  display: block;
  width: 1300px;
  height: 100%;
  margin: 0 auto;
}

div.article-text {
  border-right: 4px solid #ccc;
  width: 736px;
  height: 100%;
  padding: 20px;
  float: left;
}

div.annotations-sidebar {
  width: 480px;
  height: 100%;
  padding: 20px;
  float: right;
}

div.annotation {
  width: 440px;
  border: 4px solid #ccc;
  padding: 10px;
}

div.annotation img {
  margin: 0 auto;
}

</style>

<h2><%= @article.title %></h2>

  <%= render 'shared/vote_buttons', votable: @article %>

<br>
<h3>
  By <a href="<%= author_url(@article.author) %>">
    <%= @article.author.name %></a>, <%= @article.year %>
</h3>
<br>

<section class="main group">
  <div class="article-text">
    <% lines = @article.text.split("\r\n") %>

    <% lines.each do |line| %>
    <%= line %><br>
    <% end %>
  </div>

  <div class="annotations-sidebar">

    <% if !!current_user %>
      <%= render 'new_annotation' %>
      <hr>
    <% end %>

    <h2>Annotations for this article</h2>

    <% @article.annotations.each do |annotation| %>
      <div class="annotation">

        <%= render :partial => "show_annotation", locals: { annotation: annotation } %>

      </div>
    <% end %>
  </div>

</section>

<hr>
<a href="#top">Back to top</a>