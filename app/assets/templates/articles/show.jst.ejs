<style>

.group:after {
  content: "";
  clear: both;
  display: block;
}

section.main {
  display: block;
  width: 1300px;
  height: 100%;
  margin: 0 auto;
}

div.article-text {
  border-right: 4px solid #ccc;
  width: 736px;
  height: 100%;
  padding: 20px;
  float: left;
}

div.annotations-sidebar {
  width: 480px;
  height: 100%;
  padding: 20px;
  float: right;
}

div.annotation {
  width: 440px;
  border: 4px solid #ccc;
  padding: 10px;
}

div.annotation img {
  margin: 0 auto;
}

</style>

<h2><%= article.get('title') %></h2>

<br>
<h3>
  By <a>
    <%= article.author().get("name") %></a>, <%= article.get('year') %>
</h3>
<br>

<section class="main group">
  <div class="article-text">

    <% article.get('text').split("\r\n").forEach(function (line) { %>
      <%= line %>
      <br>
    <% }) %>

  </div>


  <div class="annotations-sidebar">

    <h2>Annotations for this article</h2>

    <% article.annotations().each(function (annotation) {%>
      <div class="annotation">

        <h3><% article.get('text').slice(parseInt(article.get('start')), parseInt(article.get('end')) + 1) %></h3>
        <hr>
        <%= annotation.get('text') %>
        --<a><small><%= annotation.user().get("username") %></small></a>

        <% if !(annotation.get('image').indexOf("missing") === -1) { %>
          <img src="<%= annotation.get('image') %>">
        <% } %>

      </div>

    <% }) %>
  </div>

</section>

<hr>
<a href="#top">Back to top</a>